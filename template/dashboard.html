<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard des Plan√®tes Habitables</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/css/theme.css">
    <link rel="stylesheet" href="/static/css/layout.css">
    <link rel="stylesheet" href="/static/css/component.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="/static/logo/logo.png" alt="SKY-BLUE CORPORATION - Vivre dans un Univers Num√©rique" class="logo-img">
        </div>
        <div class="container">
            <h1>Dashboard des Plan√®tes Habitables</h1>
            <p class="subtitle">Comparaison de la Terre avec une exoplan√®te candidate</p>
        </div>
    </header>
    
    <div class="container">
        <div class="dashboard">
            <div class="filters">
                <h2>S√©lection de Plan√®te</h2>
                <div class="planet-list">
                    <div class="planet-item selected" data-planet="earth">Terre (R√©f√©rence)</div>
                    <div class="planet-item" data-planet="teegarden">Teegarden's Star c (2019)</div>
                    <div class="planet-item" data-planet="kepler1229">Kepler-1229 b (2016)</div>
                    <div class="planet-item" data-planet="trappist1f">TRAPPIST-1 f (2017)</div>
                    <div class="planet-item" data-planet="proxima">Proxima Centauri b (2016)</div>
                    <div class="planet-item" data-planet="lhs1140">LHS 1140 b (2017)</div>
                </div>
                
                <h2>Informations</h2>
                <p>Ce dashboard compare la Terre avec une exoplan√®te s√©lectionn√©e selon diff√©rents crit√®res d'habitabilit√©.</p>
                <p>S√©lectionnez une plan√®te dans la liste pour voir sa comparaison d√©taill√©e avec la Terre.</p>
            </div>
            
            <div class="visualization">
                <div class="comparison-header">
                    <h2>Comparaison Plan√©taire</h2>
                    <div>
                        <div class="selected-planet">S√©lection: <span>Terre (R√©f√©rence)</span></div>
                        <button class="export-btn" id="exportBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                            </svg>
                            Exporter les donn√©es (CSV)
                        </button>
                    </div>
                </div>
                
                <div class="planet-cards">
                    <div class="planet-card earth">
                        <div class="planet-image">üåé</div>
                        <h3>Terre</h3>
                        <p>Distance: 0 AL</p>
                        <p>Masse: 1 M‚äï</p>
                        <p>Rayon: 1 R‚äï</p>
                        <p>P√©riode orbitale: 365.25 jours</p>
                        <div class="habitability-score">Habitabilit√©: 0.99</div>
                    </div>
                    
                    <div class="planet-card">
                        <div class="planet-image">ü™ê</div>
                        <h3>Teegarden's Star c</h3>
                        <p>Distance: 12.5 AL</p>
                        <p>Masse: 1.1 M‚äï</p>
                        <p>Rayon: 1.04 R‚äï</p>
                        <p>P√©riode orbitale: 11.4 jours</p>
                        <div class="discovery-year">D√©couverte: 2019</div>
                        <div class="habitability-score">Habitabilit√©: 0.84</div>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-box">
                        <div class="chart-title">Comparaison des Tailles (Rayon terrestre)</div>
                        <canvas id="sizeChart"></canvas>
                    </div>
                    
                    <div class="chart-box">
                        <div class="chart-title">Temp√©rature d'√©quilibre (¬∞C)</div>
                        <canvas id="tempChart"></canvas>
                    </div>
                    
                    <div class="chart-box">
                        <div class="chart-title">Flux Stellaire Re√ßu (Terre=1)</div>
                        <canvas id="fluxChart"></canvas>
                    </div>
                    
                    <div class="chart-box">
                        <div class="chart-title">Facteurs d'Habitabilit√©</div>
                        <div class="key-factors">
                            <div class="factor">
                                <div>Eau liquide potentielle</div>
                                <div class="factor-bar">
                                    <div class="factor-value" style="width: 95%"></div>
                                </div>
                            </div>
                            <div class="factor">
                                <div>Atmosph√®re potentielle</div>
                                <div class="factor-bar">
                                    <div class="factor-value" style="width: 90%"></div>
                                </div>
                            </div>
                            <div class="factor">
                                <div>Stabilit√© orbitale</div>
                                <div class="factor-bar">
                                    <div class="factor-value" style="width: 98%"></div>
                                </div>
                            </div>
                            <div class="factor">
                                <div>Protection contre les radiations</div>
                                <div class="factor-bar">
                                    <div class="factor-value" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const planets = {
            earth: {
                name: "Terre",
                distance: 0,
                mass: 1,
                radius: 1,
                temperature: 15,
                flux: 1,
                orbitalPeriod: 365.25,
                habitability: 0.99,
                factors: { water: 95, atmosphere: 90, stability: 98, radiation: 85 }
            },
            teegarden: {
                name: "Teegarden's Star c",
                distance: 12.5,
                mass: 1.1,
                radius: 1.04,
                temperature: -47,
                flux: 0.72,
                orbitalPeriod: 11.4,
                habitability: 0.84,
                factors: { water: 80, atmosphere: 70, stability: 85, radiation: 60 }
            },
            kepler1229: {
                name: "Kepler-1229 b",
                distance: 49.5,
                mass: 2.7,
                radius: 1.4,
                temperature: -48,
                flux: 0.73,
                orbitalPeriod: 86.7,
                habitability: 0.79,
                factors: { water: 75, atmosphere: 65, stability: 80, radiation: 55 }
            },
            trappist1f: {
                name: "TRAPPIST-1 f",
                distance: 39.5,
                mass: 0.93,
                radius: 1.04,
                temperature: -65,
                flux: 0.38,
                orbitalPeriod: 9.2,
                habitability: 0.76,
                factors: { water: 70, atmosphere: 60, stability: 75, radiation: 50 }
            },
            proxima: {
                name: "Proxima Centauri b",
                distance: 4.24,
                mass: 1.27,
                radius: 1.1,
                temperature: -39,
                flux: 0.65,
                orbitalPeriod: 11.2,
                habitability: 0.87,
                factors: { water: 85, atmosphere: 75, stability: 90, radiation: 60 }
            },
            lhs1140: {
                name: "LHS 1140 b",
                distance: 40.7,
                mass: 6.38,
                radius: 1.73,
                temperature: -50,
                flux: 0.46,
                orbitalPeriod: 24.7,
                habitability: 0.81,
                factors: { water: 78, atmosphere: 68, stability: 83, radiation: 58 }
            }
        };

        const sizeCtx = document.getElementById('sizeChart').getContext('2d');
        const tempCtx = document.getElementById('tempChart').getContext('2d');
        const fluxCtx = document.getElementById('fluxChart').getContext('2d');

        const sizeChart = new Chart(sizeCtx, {
            type: 'bar',
            data: {
                labels: ['Terre', 'Teegarden c'],
                datasets: [{ label: 'Rayon (Terre=1)', data: [1, 1.04], backgroundColor: ['#2e86de', '#7fdbda'] }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Rayon terrestre (R‚äï)' } } }
            }
        });

        const tempChart = new Chart(tempCtx, {
            type: 'bar',
            data: {
                labels: ['Terre', 'Teegarden c'],
                datasets: [{ label: 'Temp√©rature (¬∞C)', data: [15, -47], backgroundColor: ['#2e86de', '#7fdbda'] }]
            },
            options: {
                responsive: true,
                scales: { y: { title: { display: true, text: 'Temp√©rature (¬∞C)' } } }
            }
        });

        const fluxChart = new Chart(fluxCtx, {
            type: 'bar',
            data: {
                labels: ['Terre', 'Teegarden c'],
                datasets: [{ label: 'Flux stellaire (Terre=1)', data: [1, 0.72], backgroundColor: ['#2e86de', '#7fdbda'] }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: true, title: { display: true, text: 'Flux stellaire (S‚äï)' } } }
            }
        });

        document.querySelectorAll('.planet-item').forEach(item => {
            item.addEventListener('click', function() {
                const prev = document.querySelector('.planet-item.selected');
                if (prev) prev.classList.remove('selected');
                this.classList.add('selected');

                const planetId = this.getAttribute('data-planet');
                const planet = planets[planetId];

                document.querySelector('.selected-planet span').textContent = planet.name;

                const planetCard = document.querySelector('.planet-card:not(.earth)');
                planetCard.querySelector('h3').textContent = planet.name;
                planetCard.querySelector('.planet-image').textContent = planetId === 'earth' ? 'üåé' : 'ü™ê';

                const pElems = planetCard.querySelectorAll('p');
                if (pElems.length >= 4) {
                    pElems[0].textContent = `Distance: ${planet.distance} AL`;
                    pElems[1].textContent = `Masse: ${planet.mass} M‚äï`;
                    pElems[2].textContent = `Rayon: ${planet.radius} R‚äï`;
                    pElems[3].textContent = `P√©riode orbitale: ${planet.orbitalPeriod} jours`;
                }

                const discoveryYearElem = planetCard.querySelector('.discovery-year');
                if (planetId !== 'earth') {
                    const match = this.textContent.match(/\((\d{4})\)/);
                    const year = match ? match[1] : '';
                    discoveryYearElem.textContent = year ? `D√©couverte: ${year}` : '';
                    discoveryYearElem.style.display = year ? 'block' : 'none';
                } else {
                    discoveryYearElem.style.display = 'none';
                }

                planetCard.querySelector('.habitability-score').textContent = `Habitabilit√©: ${planet.habitability}`;

                sizeChart.data.labels = ['Terre', planet.name];
                sizeChart.data.datasets[0].data = [1, planet.radius];
                sizeChart.update();

                tempChart.data.labels = ['Terre', planet.name];
                tempChart.data.datasets[0].data = [15, planet.temperature];
                tempChart.update();

                fluxChart.data.labels = ['Terre', planet.name];
                fluxChart.data.datasets[0].data = [1, planet.flux];
                fluxChart.update();

                const factorEls = document.querySelectorAll('.factor-value');
                if (factorEls.length >= 4) {
                    factorEls[0].style.width = `${planet.factors.water}%`;
                    factorEls[1].style.width = `${planet.factors.atmosphere}%`;
                    factorEls[2].style.width = `${planet.factors.stability}%`;
                    factorEls[3].style.width = `${planet.factors.radiation}%`;
                }
            });
        });

        document.getElementById('exportBtn').addEventListener('click', function() {
            let csvContent = "Plan√®te,Distance (AL),Masse (M‚äï),Rayon (R‚äï),P√©riode orbitale (jours),Temp√©rature (¬∞C),Flux stellaire,Habitabilit√©\r\n";
            csvContent += `Terre,${planets.earth.distance},${planets.earth.mass},${planets.earth.radius},${planets.earth.orbitalPeriod},${planets.earth.temperature},${planets.earth.flux},${planets.earth.habitability}\r\n`;
            for (const [key, planet] of Object.entries(planets)) {
                if (key !== 'earth') {
                    csvContent += `${planet.name},${planet.distance},${planet.mass},${planet.radius},${planet.orbitalPeriod},${planet.temperature},${planet.flux},${planet.habitability}\r\n`;
                }
            }
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'donnees_planetes_habitables.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            alert('Les donn√©es ont √©t√© export√©es avec succ√®s! Le fichier "donnees_planetes_habitables.csv" va √™tre t√©l√©charg√©.');
        });

        const earthItem = document.querySelector('.planet-item[data-planet="earth"]');
        if (earthItem) earthItem.click();
    </script>
</body>
</html>
